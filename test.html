<!DOCTYPE html>
<!--
 @license
 Copyright 2019 Google LLC. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0
-->
<html>
    <head>
        <title>Place Autocomplete Address Form</title>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        <link
            href="https://fonts.googleapis.com/css?family=Roboto:400,500"
            rel="stylesheet"
        />

        <style>
            /**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
            /* 
 * Always set the map height explicitly to define the size of the div element
 * that contains the map. 
 */

            /*
            #map {
                height: 100%;
            }
*/
            /* 
   * Optional: Makes the sample page fill the window. 
   */

            /*
            html,
            body {
                height: 100%;
                margin: 0;
                padding: 0;
            }

            body {
                font-family: "Roboto", sans-serif;
                font-size: 18px;
                color: rgb(104, 104, 104);
            }

            form {
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                max-width: 400px;
                padding: 20px;
            }

            input {
                width: 100%;
                margin-top: 0;
                padding: 0.5em;
                border: 0;
                border-bottom: 2px solid gray;
                font-family: "Roboto", sans-serif;
                font-size: 18px;
            }

            input[type="reset"] {
                width: auto;
                height: auto;
                border-bottom: 0;
                background-color: transparent;
                color: rgb(104, 104, 104);
                font-size: 14px;
            }

            .title {
                width: 100%;
                margin-block-end: 0;
                font-weight: 500;
            }

            .note {
                width: 100%;
                margin-block-start: 0;
                font-size: 12px;
            }

            .form-label {
                width: 100%;
                padding: 0.5em;
            }

            .full-field {
                flex: 400px;
                margin: 15px 0;
            }

            .slim-field-left {
                flex: 1 150px;
                margin: 15px;
                margin-inline-start: 0;
            }

            .slim-field-right {
                flex: 1 150px;
                margin: 15px;
                margin-inline-end: 0;
            }

            .my-button {
                background-color: #000;
                border-radius: 6px;
                color: #fff;
                margin: 10px;
                cursor: pointer;
                padding: 6px 24px;
                text-decoration: none;
            }

            .my-button:hover {
                background-color: #666;
            }

            .my-button:active {
                position: relative;
                top: 1px;
            }

            */
        </style>
    </head>
    <body>
        <!-- Note: The address components in this sample are based on North American address format. You might need to adjust them for the locations relevant to your app. For more information, see
https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-addressform
    -->

        <form id="address-form" action="" method="get" autocomplete="off">
            <label class="location">
                <span class="form-label">Location</span>
                <input
                    id="location"
                    name="location"
                    required
                    autocomplete="off"
                />
            </label>
            <!-- <label class="full-field">
                <span class="form-label"
                    >Apartment, unit, suite, or floor #</span
                >
                <input id="address2" name="address2" />
            </label>
            <label class="full-field">
                <span class="form-label">City*</span>
                <input id="locality" name="locality" required />
            </label>
            <label class="slim-field-start">
                <span class="form-label">State/Province*</span>
                <input id="state" name="state" required />
            </label>
            <label class="slim-field-end" for="postal_code">
                <span class="form-label">Postal code*</span>
                <input id="postcode" name="postcode" required />
            </label>
            <label class="full-field">
                <span class="form-label">Country/Region*</span>
                <input id="country" name="country" required />
            </label>
            <button type="button" class="my-button">Save address</button> -->

            <!-- Reset button provided for development testing convenience.
  Not recommended for user-facing forms due to risk of mis-click when aiming for Submit button. -->
            <!-- <input type="reset" value="Clear form" /> -->
        </form>

        <!-- 
      The `defer` attribute causes the callback to execute after the full HTML
      document has been parsed. For non-blocking uses, avoiding race conditions,
      and consistent behavior across browsers, consider loading using Promises.
      See https://developers.google.com/maps/documentation/javascript/load-maps-js-api
      for more information.
      -->
        <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAquUOps_egrRsAbtNpCEpW1Coa-6a3ua8&callback=initAutocomplete&libraries=places&v=weekly"
            defer
        ></script>

        <script>
            let autocomplete;
            let locationField;
            //let address2Field;
            //let postalField;

            function initAutocomplete() {
                locationField = document.querySelector("#location");
                /*address2Field = document.querySelector("#address2");
                postalField = document.querySelector("#postcode");*/
                // Create the autocomplete object, restricting the search predictions to
                // addresses in the US and Canada.
                autocomplete = new google.maps.places.Autocomplete(
                    locationField,
                    {
                        //componentRestrictions: { country: ["dk"] },
                        fields: ["name", "formatted_address"],
                    }
                );
                locationField.focus();
                // When the user selects an address from the drop-down, populate the
                // address fields in the form.
                autocomplete.addListener("place_changed", fillInAddress);
            }

            function fillInAddress() {
                // Get the place details from the autocomplete object.
                const place = autocomplete.getPlace();

                console.log("place", place);

                locationField.value =
                    place.name + ", " + place.formatted_address;
            }

            window.initAutocomplete = initAutocomplete;
        </script>
    </body>
</html>
