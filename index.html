<!DOCTYPE html>
<html>
    <head>
        <script src="https://accounts.google.com/gsi/client"></script>
        <script src="https://apis.google.com/js/api.js"></script>
    </head>

    <body>
        <script>
            const client = google.accounts.oauth2.initTokenClient({
                client_id:
                    "550349020422-m8h9na45b8abctrht36fsqadaueaqfrn.apps.googleusercontent.com",
                scope: "https://www.googleapis.com/auth/calendar.readonly",
                prompt: "select_account",
                callback: (response) => {
                    console.log(response);
                    gapi.load("client", function () {
                        gapi.client.setToken(response.access_token);
                        gapi.client.load("calendar", "v3", function () {
                            // Do something after client loaded.
                            console.log("client loaded");
                            console.log(
                                gapi.client.calendar.calendarList
                                    .list({
                                        auth: gapi.auth2
                                            .getAuthInstance()
                                            .currentUser.get()
                                            .getAuthResponse().access_token,
                                    })
                                    .execute()
                            );
                        });

                        // console.log(gapi.client);

                        // console.log("OK");
                    });
                },
            });
        </script>

        <button onclick="client.requestAccessToken();">Authorize me</button>
    </body>
    <!-- <head>

    </head>
    <body>
        <script>
            var client;
            function initClient() {
                client = google.accounts.oauth2.initCodeClient({
                    client_id:
                        "550349020422-m8h9na45b8abctrht36fsqadaueaqfrn.apps.googleusercontent.com",
                    scope: "https://www.googleapis.com/auth/calendar.readonly",
                    ux_mode: "redirect",
                    redirect_uri:
                        "https://r-poulsen.github.io/eventinator/oauth2redirect.html",
                });
            }
            // Request an access token
            function getAuthCode() {
                // Request authorization code and obtain user consent
                client.requestCode();
            }
        </script> -->

    <!-- 

        <script>
            var client;
            function initClient() {
                client = google.accounts.oauth2.initCodeClient({
                    client_id:
                        "550349020422-m8h9na45b8abctrht36fsqadaueaqfrn.apps.googleusercontent.com",
                    scope: "https://www.googleapis.com/auth/calendar.readonly",
                    ux_mode: "popup",
                    callback: (response) => {
                        var code_receiver_uri =
                            "https://r-poulsen.github.io/eventinator/oauth2redirect.html";
                        // Send auth code to your backend platform
                        const xhr = new XMLHttpRequest();
                        xhr.open("GET", code_receiver_uri, true);
                        xhr.setRequestHeader(
                            "Content-Type",
                            "application/x-www-form-urlencoded"
                        );
                        xhr.setRequestHeader(
                            "X-Requested-With",
                            "XMLHttpRequest"
                        );
                        xhr.onload = function () {
                            console.log("Signed in as: " + xhr.responseText);
                        };
                        xhr.send("code=" + response.code);
                        // After receipt, the code is exchanged for an access token and
                        // refresh token, and the platform then updates this web app
                        // running in user's browser with the requested calendar info.
                    },
                });
            }
            function getAuthCode() {
                // Request authorization code and obtain user consent
                client.requestCode();
            }
        </script> -->
    <!-- <button onclick="getAuthCode();">Load Your Calendar</button>
    </body>
</html> -->

    <!--html lang="en" xml:lang="en">
    <head>
        <title>Live Server</title>
    </head>
    <body>
        <script type="module" src="js/main.js"></script>
        <script
            src="https://apis.google.com/js/platform.js?onload=init"
            async
            defer
        ></script>

        <div>
            <select id="event_type_sel">
                <option value="concert">ðŸŽ¶ Concert</option>
                <option value="comedy">ðŸ˜€ Comedy</option>
                <option value="other">Other</option>
                <option value="custom">Custom</option>
            </select>
            <input id="event_name_input" type="text" />

            <div>
                <label for="event_dt">Event time and date</label>
                <input type="datetime-local" id="event_dt" />
            </div>

            <div>
                <label for="event_url">Participants</label>
                <input type="number" id="participants_ipt" />
            </div>
        </div>

        <div>
            <div>
                <input type="checkbox" id="no_purchase_task" />
                <label for="no_purchase_task">
                    Don't create a task to purchase tickets
                </label>
            </div>

            <label for="ticket_dt">Ticket sale opens</label>
            <input type="datetime-local" id="ticket_dt" />
        </div>
        <div>
            <button id="add_btn">Add to Calendar</button>
        </div>
    </body>
</html-->
</html>
